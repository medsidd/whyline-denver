<mxfile host="65bd71144e">
    <diagram id="equity-lineage" name="Equity Domain Lineage">
        <mxGraphModel dx="418" dy="695" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1500" pageHeight="1000" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="e9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=3;strokeColor=#ab47bc;" parent="1" source="stg-stops" target="mart-vuln" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="title" value="Equity Domain: Census ACS + Tracts + Stops → Vulnerability &amp; Priority Scoring" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=17;fontStyle=1;fontColor=#6a1b9a;" parent="1" vertex="1">
                    <mxGeometry x="150" y="20" width="1200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="bg-bronze" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ff6f00;opacity=25;" parent="1" vertex="1">
                    <mxGeometry x="40" y="80" width="1420" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="bg-silver" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;opacity=25;" parent="1" vertex="1">
                    <mxGeometry x="40" y="220" width="1420" height="210" as="geometry"/>
                </mxCell>
                <mxCell id="bg-gold" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#c2185b;opacity=25;" parent="1" vertex="1">
                    <mxGeometry x="40" y="470" width="1420" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="label-bronze" value="BRONZE" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=12;fontStyle=1;fontColor=#ff6f00;" parent="1" vertex="1">
                    <mxGeometry x="60" y="90" width="80" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="label-silver" value="SILVER" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=12;fontStyle=1;fontColor=#7b1fa2;" parent="1" vertex="1">
                    <mxGeometry x="60" y="230" width="80" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="label-gold" value="GOLD" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=12;fontStyle=1;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="60" y="480" width="80" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="src-acs" value="U.S. Census&#xa;ACS 5-Year" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;size=12;fillColor=#ff9800;strokeColor=#e65100;fontColor=#ffffff;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="120" y="120" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="src-tracts" value="Census TIGER&#xa;Tract Boundaries" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;size=12;fillColor=#ffb74d;strokeColor=#f57c00;fontColor=#ffffff;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="300" y="120" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="src-stops" value="RTD GTFS&#xa;Stop Locations" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;size=12;fillColor=#4caf50;strokeColor=#2e7d32;fontColor=#ffffff;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="480" y="120" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="raw-acs" value="raw_acs_tract&#xa;~140 Denver tracts" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe0b2;strokeColor=#ff9800;fontColor=#e65100;fontStyle=1;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="120" y="250" width="140" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="raw-tracts" value="raw_denver_tracts&#xa;GeoJSON polygons" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#fb8c00;fontColor=#e65100;fontStyle=1;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="300" y="250" width="140" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="raw-stops" value="raw_gtfs_stops" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#4caf50;fontColor=#1b5e20;fontStyle=1;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="480" y="250" width="140" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="stg-acs" value="stg_acs_geo&#xa;• Compute percentages:&#xa;  - pct_hh_no_vehicle&#xa;  - pct_transit_commute&#xa;  - pct_poverty" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffab91;strokeColor=#e64a19;fontColor=#bf360c;fontStyle=1;fontSize=9;align=left;" parent="1" vertex="1">
                    <mxGeometry x="100" y="320" width="180" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="stg-tracts" value="stg_denver_tracts&#xa;• Parse GeoJSON → GEOGRAPHY&#xa;• Create polygon geometries" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#f57c00;fontColor=#e65100;fontStyle=1;fontSize=9;align=left;" parent="1" vertex="1">
                    <mxGeometry x="300" y="320" width="180" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="stg-stops" value="stg_gtfs_stops&#xa;• Create POINT geometry&#xa;• Dedupe by stop_id" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388e3c;fontColor=#1b5e20;fontStyle=1;fontSize=9;align=left;" parent="1" vertex="1">
                    <mxGeometry x="500" y="320" width="160" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="mart-vuln" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;mart_vulnerability_by_stop&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;SPATIAL JOIN: ST_DWITHIN(stop.geom, tract.geom, 804.672m)  [0.5mi walkable]&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;POPULATION-WEIGHTED AVERAGES for each stop:&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;pct_hh_no_vehicle_w = Σ(pct × pop) / Σ(pop)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;pct_transit_commute_w = Σ(pct × pop) / Σ(pop)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;pct_poverty_w = Σ(pct × pop) / Σ(pop)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;COMPOSITE SCORE:&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;vuln_raw = (no_vehicle + transit_commute + poverty) / 3&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;vuln_score_0_100 = min-max normalize to 0-100 scale&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;OUTPUT: One row per stop with vulnerability metrics&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ba68c8;strokeColor=#6a1b9a;fontColor=#ffffff;fontStyle=1;fontSize=10;shadow=1;align=center;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="100" y="520" width="550" height="210" as="geometry"/>
                </mxCell>
                <mxCell id="mart-hotspot" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;mart_priority_hotspots&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;JOINS (all marts across domains):&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;• mart_vulnerability_by_stop → vuln_score_0_100&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;• mart_crash_proximity_by_stop → crash_250m_cnt (normalized 0-100)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;• mart_reliability_by_stop_hour → avg OTP (inverted: 100 - OTP)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;WEIGHTED COMPOSITE SCORE:&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;priority_score = 0.5 × vuln_score&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;+ 0.3 × crash_score&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;+ 0.2 × reliability_score&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;INTERPRETATION: Higher score = Higher priority for intervention&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(255, 255, 255);&quot;&gt;Emphasizes equity (50%) over safety (30%) and reliability (20%)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d81b60;strokeColor=#880e4f;fontColor=#ffffff;fontStyle=1;fontSize=10;shadow=1;align=center;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="820" y="530" width="590" height="190" as="geometry"/>
                </mxCell>
                <mxCell id="e1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#ff9800;" parent="1" source="src-acs" target="raw-acs" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="e2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#ff9800;" parent="1" source="src-tracts" target="raw-tracts" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="e3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#4caf50;" parent="1" source="src-stops" target="raw-stops" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="e4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#e64a19;" parent="1" source="raw-acs" target="stg-acs" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="e5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#f57c00;" parent="1" source="raw-tracts" target="stg-tracts" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="e6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#4caf50;" parent="1" source="raw-stops" target="stg-stops" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="e7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=3;strokeColor=#ab47bc;" parent="1" source="stg-acs" target="mart-vuln" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="e8" value="Spatial JOIN" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=3;strokeColor=#ab47bc;fontSize=9;" parent="1" source="stg-tracts" target="mart-vuln" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="e10" value="50% weight" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=4;strokeColor=#d81b60;fontSize=10;fontStyle=1;" parent="1" source="mart-vuln" target="mart-hotspot" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="cross1" value="mart_crash_proximity_by_stop&#xa;(30% weight)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#4fc3f7;strokeColor=#0277bd;fontColor=#ffffff;fontSize=9;fontStyle=1;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="750" y="320" width="200" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="cross2" value="mart_reliability_by_stop_hour&#xa;(20% weight)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ef5350;strokeColor=#c62828;fontColor=#ffffff;fontSize=9;fontStyle=1;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="320" width="200" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="e11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#0277bd;dashed=1;" parent="1" source="cross1" target="mart-hotspot" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="e12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#c62828;dashed=1;" parent="1" source="cross2" target="mart-hotspot" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="insights" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;WHY 0.5 MILES (804.672m)?&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;Standard transit equity walkable catchment.&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;Reflects typical first/last-mile access distance.&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;VULNERABILITY COMPONENTS:&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;• No vehicle: Transit dependency&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;• Transit commute: Service reliance&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;• Poverty: Economic vulnerability&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;HOTSPOT WEIGHTING RATIONALE:&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;• 50% vulnerability (equity-focused)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;• 30% safety (crash exposure)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;• 20% reliability (service quality)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44); font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;USE CASE: Capital investment prioritization&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;Stops scoring high serve vulnerable populations&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;&lt;font style=&quot;color: rgb(217, 130, 44);&quot;&gt;with poor safety/reliability → top priority&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#f57f17;align=center;verticalAlign=top;fontStyle=1;fontSize=10;shadow=1;fontColor=#e65100;" parent="1" vertex="1">
                    <mxGeometry x="130" y="760" width="400" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="scoring" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;COMPOSITE SCORING METHODOLOGY&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;Step 1: Normalize each component to 0-100 scale&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;min-max normalization: (x - min) / (max - min) × 100&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;Step 2: Apply domain weights&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;priority = 0.5 × vuln + 0.3 × crash + 0.2 × reliability&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;Step 3: Rank stops&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;DENSE_RANK() OVER (ORDER BY priority DESC)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;Top-ranked stops:&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;✓ Serve transit-dependent, economically vulnerable populations&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;✓ High crash exposure (dangerous approaches)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;✓ Poor service reliability (late/missing buses)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;→ Prime candidates for targeted infrastructure investment&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#9e9e9e;align=center;verticalAlign=top;fontStyle=1;fontSize=10;shadow=1;fontColor=#424242;" parent="1" vertex="1">
                    <mxGeometry x="580" y="760" width="500" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="spatial" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;SPATIAL JOIN DETAILS&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;BigQuery ST_DWITHIN(point, polygon, meters):&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;• Returns true if distance ≤ threshold&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;• Computationally expensive (full table scan)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;• Materializes as full table (not incremental)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;Population weighting:&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;Stops near multiple tracts average metrics&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;weighted by population to reflect catchment&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: transparent; font-weight: normal;&quot;&gt;demographics accurately&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e0f2f1;strokeColor=#00897b;align=center;verticalAlign=top;fontStyle=1;fontSize=9;shadow=1;fontColor=#004d40;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="760" width="300" height="210" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>